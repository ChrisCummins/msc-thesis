#!/usr/bin/env python2.7

from __future__ import print_function
from re import sub

import benchlib as lib

experiment = {
    'have_data': True,
    'name': 'e1',
    'iterations': 30,
    'progs': {
        'CannyEdgeDetection': [
            ['', '--map-overlap'],
            ['--radius {0}'.format(x) for x in range(1, 10 + 1, 3)],
            ['--input {0} --output {1}'.format(x, sub('\.pgm', '.out.pgm', x))
             for x in lib.IMAGES]
        ],
        'GameOfLife': [
            ['', '--map-overlap'],
            ['--size {0}'.format(x) for x in range(1024, 4096 + 1, 1024)],
            ['--iterations {0}'.format(x) for x in range(10, 50 + 1, 10)]
        ],
        'FDTD': [
            ['--size {0}'.format(x) for x in range(1024, 4096 + 1, 1024)],
            ['--resolution {0}'.format(x) for x in range(50, 150 + 1, 50)],
        ]
    }
}

if lib.ID() != "cec":
    for prog in experiment['progs']:
        experiment['progs'][prog].append(['--device_type {0}'.format(x) for x in ['CPU', 'GPU']])

# Run experiment
if not experiment['have_data']:
    lib.iterate(experiment)
